<!doctype html>
<!--
 ________  ___  ___  _________  ________  ________   ________  ___      ___ ___     
|\   __  \|\  \|\  \|\___   ___\\   __  \|\   ___  \|\   __  \|\  \    /  /|\  \    
\ \  \|\  \ \  \\\  \|___ \  \_\ \  \|\  \ \  \\ \  \ \  \|\  \ \  \  /  / | \  \   
 \ \   __  \ \  \\\  \   \ \  \ \ \  \\\  \ \  \\ \  \ \   __  \ \  \/  / / \ \  \  
  \ \  \ \  \ \  \\\  \   \ \  \ \ \  \\\  \ \  \\ \  \ \  \ \  \ \    / /   \ \  \ 
   \ \__\ \__\ \_______\   \ \__\ \ \_______\ \__\\ \__\ \__\ \__\ \__/ /     \ \__\
    \|__|\|__|\|_______|    \|__|  \|_______|\|__| \|__|\|__|\|__|\|__|/       \|__|
-->
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" href="images/logo-120x120.png">
        <link rel="shortcut icon" href="images/favicon.ico">
        <link rel="stylesheet" href="dist/navi-25a23a3612f4eaaf7a9795a6e0149d4d.css">
        <title>高德地图</title>
    </head>
    <body>
        <div id="light-navi-wrapper">
            <div id="map-container">
                <div id="map-view"></div>
                <div id="map-header" class="header"></div>
                <div id="map-content" class="content hide">
                    <div id="navi-car-detail" class="hide"></div>
                    <div id="navi-bus-list" class="hide"></div>
                    <div id="navi-bus-detail" class="hide"></div>
                    <div id="navi-walk-detail" class="hide"></div>
                </div>
                <div id="map-footer" class="footer hide">
                    <div id="navi-car-footer" class="hide"></div>
                    <div id="navi-bus-footer" class="hide"></div>
                    <div id="navi-walk-footer" class="hide"></div>
                </div>
                <div id="zoom-handler">
                    <a class="zoom-in navi-icon" href="javascript:;"></a>
                    <a class="zoom-out navi-icon" href="javascript:;"></a>
                </div>
                <a id="map-locate" class="navi-icon" href="javascript:;"></a>
                <a id="road-traffic" class="navi-icon" href="javascript:;"></a>
            </div>
        </div>
        <div id="loading-view" class="hide">
            <span class="message-container"></span>
        </div>
        <!-- templates start -->
        <script type="text/template" id="map-header-template">
            <div id="header-title" class="<% if (active) { %>hide<% } %>"><a href="javascript:;" class="backward navi-icon"></a><div class="header-title"><%= title %></div></div><div id="header-ways" class="hide"><a href="javascript:;" class="backward navi-icon <% if (active) { %>hide<% } %>"></a><div class="header-ways"><ul class="clearfix"><li class="naviby-car" data-naviby="car"><i class="navi-icon <% if (active === 'car') { %>active<% } %>"></i></li><li class="naviby-bus" data-naviby="bus"><i class="navi-icon <% if (active === 'bus') { %>active<% } %>"></i></li><li class="naviby-walk" data-naviby="walk"><i class="navi-icon <% if (active === 'walk') { %>active<% } %>"></i></li></ul></div></div>
        </script>
        <script type="text/template" id="marker-point-template">
            <div class="marker-point my-position-animation" title="我的位置"></div>
        </script>
        <script type="text/template" id="dest-tooltip-template">
            <div class="dest-tooltip"><h2 style="max-width:<%= maxWidth %>px"><%= destName %></h2><% if (!hideRouteIcon) { %><div class="route-content"><span class="navi-icon"></span></div><% } %></div>
        </script>
        <script type="text/template" id="dest-marker-template">
            <img src="images/marker.png" width="25" height="32">
        </script>
        <script type="text/template" id="flickable-footer-template">
            <div class="flickable-footer"><div class="flickable-wrapper" style="width: <%= width %>px"><div class="flickable-gallery clearfix" style="width: <%= width * routes.length %>px"><% _.each(routes, function(route, index) { %><div class="flickable-el" style="width: <%= width - 20 %>px" data-index="<%= index %>"><button class="navi-button">详情</button><div class="flickable-inner"><% if (way === 'car' || way === 'walk') { %><h3>约<%= route.time %>(<%= route.distance %>)</h3><div class="flickable-description"><% if (route.cost) { %><span>打车约<span class="red-text"><%= route.cost %></span>元</span><% } %></div><% } else if (way === 'bus') { %><h3><%= route.title %></h3><div class="flickable-description"><div><span><%= route.totalTime %></span> <span>步行<%= route.walkDistance %></span></div></div><% } %></div></div><% }); %></div></div><% if (routes.length > 1) { %><div class="flickable-indicators"><% _.each(routes, function(route, index) { %><% if (index === 0) { %><i class="flickable-indicator navi-icon active"></i><% } else { %> <i class="flickable-indicator navi-icon"></i><% } %><% }); %></div><% } %></div>
        </script>
        <script type="text/template" id="navi-detail-template">
            <div class="navi-summary"><% if (way === 'bus') { %><h3><%= title %></h3><% } else { %><h3>约<%= time %>(<%= distance %>)</h3><% } %><div class="navi-summary-description"><% if (way === 'bus') { %>约<span class="red-text"><%= totalTime %></span> 乘车<span class="red-text"><%= stationsCount %></span>站地 步行<span class="red-text"><%= walkDistance %></span><% } else { %><% if (cost) { %> 打车约<span class="red-text"><%= cost %></span>元<% } %><% } %></div></div><div class="navi-detail"><% if (way === 'bus') { %><div class="navi-bus-detail"><div class="bus-detail-item"><div class="bus-icon bus-icon-start"><span class="bus-detail-text">起点</span></div></div><% _.each(routes, function(segment, index) { %><% if (segment.walking) { %><div class="bus-detail-item"><% if (segment.walking.steps && segment.walking.steps.length) { %><div class="bus-icon bus-icon-walk"><% if (segment.walking.steps.length > 1) { %><span class="busi-icon bus-guide">指引</span><% } %> <span class="bus-detail-text line-split">步行<%= segment.walkingDistance %></span></div><% if (segment.walking.steps.length > 1) { %><div class="bus-detail-group"><% _.each(segment.walking.steps, function(step) { %><div class="bus-icon bus-icon-dot"><span class="bus-detail-text"><%= step.instruction %></span></div><% }); %></div><% } %><% } %></div><% } %><% if (segment.bus && segment.bus.buslines && segment.bus.buslines[0]) { %><div class="bus-detail-item"><div class="bus-icon bus-icon-bus"><span class="bus-detail-text line-split"><%= segment.bus.buslines[0].name %></span></div><div class="bus-icon bus-icon-dot"><span class="bus-icon bus-guide"><%= segment.bus.buslines[0].via_stops.length + 1 %>站</span> <span class="bus-detail-text">从<%= segment.bus.buslines[0].departure_stop.name %>上车</span></div><% if (segment.bus.buslines[0].via_stops.length > 1) { %><div class="bus-detail-group"><% _.each(segment.bus.buslines[0].via_stops, function(stop) { %><div class="bus-icon bus-icon-dot"><span class="bus-detail-text"><%= stop.name %></span></div><% }); %></div><% } %><div class="bus-icon bus-icon-dot"><span class="bus-detail-text">在<%= segment.bus.buslines[0].arrival_stop.name %>下车</span></div></div><% } %><% }); %><div class="bus-detail-item"><div class="bus-icon bus-icon-end"><span class="bus-detail-text">终点</span></div></div></div><% } else { %><div class="navi-cw-detail"><div class="route-detail"><span class="bus-icon cw-icon-start"></span><div class="route-text">起点</div></div><% _.each(path, function(path, index) { %><div class="route-detail"><span class="turning-icon turning-icon-<%= path.icon %>"></span><div class="route-text"><%= path.instruction %></div></div><% }); %><div class="route-detail"><span class="bus-icon cw-icon-end"></span><div class="route-text">终点</div></div></div><% } %></div>
        </script>
        <script type="text/template" id="navi-bus-types-template">
            <div class="navi-bus-types"><ul><li class="navi-bus-type active" data-type="0">最佳路线</li><li class="navi-bus-type" data-type="3">步行少</li><li class="navi-bus-type" data-type="2">换乘少</li><li class="navi-bus-type" data-type="5">不坐地铁</li></ul></div><div class="navi-bus-list"></div>
        </script>
        <script type="text/template" id="navi-bus-list-template">
            <% _.each(routes, function(route, index) { %><div class="bus-route" data-index="<%= index %>"><h3><%= route.title %></h3><div><span><%= route.totalTime %></span> <span>步行<%= route.walkDistance %></span></div></div><% }); %>
        </script>
        <!-- tempalate ends -->
        <script>
            function queryStr() {
                var e = window.location.search.slice(1).split("&")
                  , r = {};
                return e.forEach(function(e) {
                    var c;
                    e && (c = e.split("="),
                    2 === c.length && (r[c[0]] = c[1]))
                }),
                r
            }
            if (/key=([^&]+)/.test(location.search)) {
                var key = RegExp.$1
                  , jscode = queryStr().jscode;
                jscode && (window._AMapSecurityConfig = {
                    securityJsCode: jscode
                }),
                document.write('<script src="//webapi.amap.com/maps?v=1.4.15&s=rsv3&rf=h5&utm_source=litemap&plugin=AMap.Geocoder&key=' + key + '"><\/script>')
            } else
                alert("请输入有效key!");
        </script>
        <script src="dist/navi-25a23a3612f4eaaf7a9795a6e0149d4d.js"></script>
        <script>
            !function(e, t, a, n, c, o, s) {
                e.GoogleAnalyticsObject = c,
                e[c] = e[c] || function() {
                    (e[c].q = e[c].q || []).push(arguments)
                }
                ,
                e[c].l = 1 * new Date,
                o = t.createElement(a),
                s = t.getElementsByTagName(a)[0],
                o.async = 1,
                o.src = n,
                s.parentNode.insertBefore(o, s)
            }(window, document, "script", "//www.google-analytics.com/analytics.js", "ga"),
            ga("create", "UA-54654858-1", "auto");
        </script>
        <script>
            !function() {
                var e, t;
                /Android 2\.3\.\d/i.test(navigator.userAgent) && (t = document.write,
                document.write = function() {
                    var e = arguments[0];
                    /\.cnzz\.com/i.test(e) || t.apply(document, arguments)
                }
                ),
                e = document.createElement("script"),
                e.async = !0,
                e.src = "//s23.cnzz.com/z_stat.php?id=1253487837&web_id=1253487837",
                document.getElementsByTagName("head")[0].appendChild(e)
            }();
        </script>
    </body>
</html>
